<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mortgage Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <style>
    :root {
      --font-color-pink: #E82583;
    }

    .input-error {
      border-color: red !important;
    }

    .error-message {
      color: red;
      display: none;
    }

    .card-style {
      width: 739px;
      height: 384px;
      background-color: #FDE9F3;
      border: 2px solid var(--font-color-pink);
      border-radius: 24px;
      /* padding: 24px; */
      padding-top: 0 !important;
      /* gap: 24px; */
    }

    .font-color-pink {
      color: var(--font-color-pink);
    }

    .top-height {
      height: 68px;
      margin-bottom: 24px;
    }

    .box-banner {
      background-color: var(--font-color-pink);
      width: 96px;
      height: 96px;
    }

    .font-24 {
      font-size: 24px;
      font-weight: 600;
    }

    .input-panel-style {
      width: 233px;
    }
  </style>
</head>

<body>
  <div class="container mt-5">
    <div class="card p-4 card-style">
      <div class="d-flex flex justify-content-between flex-col top-height">
        <div class="start pt-4">
          <div class="font-24">คำนวณสินเชื่ออสังหาฯ เบื้องต้น</div>
          <div class="flex font-color-pink text-decoration-underline">ข้อเสนอสุดพิเศษสำหรับคุณ <img
              src="./file/icon_chevron-right_next.svg" alt="icon_chevron-right_next"></div>
        </div>
        <div class="end">
          <div class="box-banner"></div>
        </div>
      </div>
      <div class="flex d-flex flex-row pt-4 input-panel-style">
        <div class="start">
          <div class="form-group">
            <label for="propertyPrice">ราคาอสังหาฯ</label>
            <input type="text" id="propertyPrice" class="form-control mb-3" placeholder="1,800,000" maxlength="13">
            <div id="propertyPriceError" class="error-message">กรุณากรอกตัวเลขไม่เกิน 99,999,999,999 และไม่ใช้ทศนิยม
            </div>
          </div>
          <div class="d-flex flex justify-content-between flex-row">
            <div class="form-group">
              <label for="interestRate">อัตราดอกเบี้ย</label>
              <input type="text" id="interestRate" class="form-control" placeholder="6.5" maxlength="5">
              <div id="interestRateError" class="error-message">กรุณากรอกตัวเลขไม่เกิน 99.99 และไม่ใช้ทศนิยมเกิน 2
                ตำแหน่ง
              </div>
            </div>
            <div class="mx-3"></div>
            <div class="form-group">
              <label for="loanTerm">จำนวนปี</label>
              <input type="text" id="loanTerm" class="form-control" placeholder="30" maxlength="2">
              <div id="loanTermError" class="error-message">กรุณากรอกตัวเลขระหว่าง 3 ถึง 99 ปี</div>
            </div>
          </div>

        </div>
        <div class="end"></div>
      </div>
      <button id="calculateBtn" class="btn btn-primary" disabled>คำนวณสินเชื่อ</button>
      <button id="resetBtn" class="btn btn-secondary">ล้างข้อมูล</button>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    function formatNumber(value) {
      return value.replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function validateInput() {
      let isValid = true;

      // Property Price Validation
      let propertyPrice = $('#propertyPrice').val().replace(/,/g, '');
      if (propertyPrice === "" || isNaN(propertyPrice) || propertyPrice <= 0 || propertyPrice > 99999999999) {
        $('#propertyPrice').addClass('input-error');
        $('#propertyPriceError').show();
        isValid = false;
      } else {
        $('#propertyPrice').removeClass('input-error');
        $('#propertyPriceError').hide();
      }

      // Interest Rate Validation
      let interestRate = $('#interestRate').val();
      if (interestRate === "" || isNaN(interestRate) || interestRate <= 0 || interestRate > 99.99) {
        $('#interestRate').addClass('input-error');
        $('#interestRateError').show();
        isValid = false;
      } else {
        $('#interestRate').removeClass('input-error');
        $('#interestRateError').hide();
      }

      // Loan Term Validation
      let loanTerm = $('#loanTerm').val();
      if (loanTerm === "" || isNaN(loanTerm) || loanTerm < 3 || loanTerm > 99) {
        $('#loanTerm').addClass('input-error');
        $('#loanTermError').show();
        isValid = false;
      } else {
        $('#loanTerm').removeClass('input-error');
        $('#loanTermError').hide();
      }

      $('#calculateBtn').prop('disabled', !isValid);
    }

    $(document).ready(function () {
      $('#propertyPrice').on('input', function () {
        $(this).val(formatNumber($(this).val()));
        validateInput();
      });

      $('#interestRate, #loanTerm').on('input', function () {
        validateInput();
      });

      $('#resetBtn').click(function () {
        $('#propertyPrice, #interestRate, #loanTerm').val('').removeClass('input-error');
        $('.error-message').hide();
        $('#calculateBtn').prop('disabled', true);
      });
    });
  </script>
</body>

</html>